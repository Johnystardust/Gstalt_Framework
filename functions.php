<?php
/**
 * Created by:  Tim van der Slik
 * Project:     Gstalt Framework
 */

/*
|----------------------------------------------------------------
|   Include the enqueue.
|----------------------------------------------------------------
*/
include_once('includes/enqueue.php');

/*
|----------------------------------------------------------------
|   Include the ACF Groups.
|----------------------------------------------------------------
*/
//include_once('includes/acf/acf-groups.php');

/*
|----------------------------------------------------------------
|   Include the customizer options.
|----------------------------------------------------------------
*/
include_once('includes/customizer/customizer.php');

/*
|----------------------------------------------------------------
|   Include the custom post type.
|----------------------------------------------------------------
*/
include_once('includes/cpt.php');

/*
|----------------------------------------------------------------
|   Include the template functions.
|----------------------------------------------------------------
*/
include_once('includes/template-functions.php');

/*
|-----------------------------------------------------------------------------------------------------------------------
|   Include the widgets.
|-----------------------------------------------------------------------------------------------------------------------
*/
include_once('includes/widgets/widgets.php');

/*
|-----------------------------------------------------------------------------------------------------------------------
|   Register menu.
|-----------------------------------------------------------------------------------------------------------------------
*/
function tvds_register_menu_init() {
    register_nav_menu('main-menu',__( 'Hoofdmenu' ));
}
add_action( 'init', 'tvds_register_menu_init' );

/*
|----------------------------------------------------------------
|   Enable the featured images.
|----------------------------------------------------------------
*/
if ( function_exists( 'add_theme_support' ) ) {
    add_theme_support( 'post-thumbnails' );
}

/*
|-----------------------------------------------------------------------------------------------------------------------
|   Remove the main WYSIWYG editor.
|-----------------------------------------------------------------------------------------------------------------------
*/
function tvds_remove_support_init(){
    remove_post_type_support( 'page', 'editor');
}
add_action('init', 'tvds_remove_support_init', 100);

/*
|-----------------------------------------------------------------------------------------------------------------------
|   Add options page with ACF.
|-----------------------------------------------------------------------------------------------------------------------
*/
if( function_exists('acf_add_options_page') ) {
    acf_add_options_page();
}

/*
|-----------------------------------------------------------------------------------------------------------------------
|   Add the read more link on new line.
|-----------------------------------------------------------------------------------------------------------------------
*/
add_filter( 'the_content_more_link', 'sp_read_more_link' );
function sp_read_more_link() {
    return '<p><a class="more-link" href="' . get_permalink() . '">'.get_field('read_more_text', 'option').'</a></p>';
}